<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–í–∞—Å –≤–∑–ª–æ–º–∞–ª–∏ ‚Äî Halloween prank</title>
<style>
  :root{
    --neon:#00ff00;         /* –∑–µ–ª—ë–Ω—ã–π –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ –∏ –ø–æ–¥–ª–æ–∂–∫–∏ –ø–ª–∞—à–∫–∏ */
    --red:#ff2d2d;          /* –±–æ–ª–µ–µ –Ω–∞—Å—ã—â—ë–Ω–Ω—ã–π –∫—Ä–∞—Å–Ω—ã–π */
  }
  html,body{height:100%;margin:0;background:#000;color:#0f0;font-family:"Courier New",monospace;overflow:hidden}
  canvas{position:fixed;inset:0;z-index:0;display:block}
  .overlay{position:relative;z-index:2;height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:18px;box-sizing:border-box}
  .panel{max-width:720px;background:rgba(0,0,0,.5);border:1px solid rgba(0,255,0,.06);padding:22px;border-radius:12px;box-shadow:0 8px 40px rgba(0,0,0,.6)}
  h1{margin:0;font-size:30px;letter-spacing:1px;color:var(--neon)}  /* —Ü–≤–µ—Ç –∫–∞–∫ —É –ø–æ–¥–ª–æ–∂–∫–∏ –ø–ª–∞—à–∫–∏ */
  .big{font-size:48px;font-weight:800;color:var(--red);text-shadow:0 0 18px rgba(255,45,45,.18);display:none;margin-top:8px}
  .type{margin-top:12px;min-height:46px;color:#cfeecc;font-size:18px}
  .reveal{margin-top:14px;display:none;background:var(--neon);color:#000;padding:12px;border-radius:8px;font-weight:800}
  @media (max-width:520px){.panel{padding:14px}.big{font-size:36px}}
</style>
</head>
<body>
<canvas id="c"></canvas>

<div class="overlay">
  <div class="panel" role="region" aria-label="–•—ç–ª–ª–æ—É–∏–Ω—Å–∫–∏–π —Ä–æ–∑—ã–≥—Ä—ã—à">
    <h1>–°–¢–ê–¢–£–° –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò: <span id="status">–ü–û–í–†–ï–ñ–î–ï–ù</span></h1>
    <div class="big" id="bigtext">–í–ê–° –í–ó–õ–û–ú–ê–õ–ò</div>
    <div class="type" id="typewriter">–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö‚Ä¶</div>
    <div class="reveal" id="revealBox">üéÉ –≠—Ç–æ —Ö—ç–ª–ª–æ—É–∏–Ω—Å–∫–∏–π —Ä–æ–∑—ã–≥—Ä—ã—à! –î–∞–Ω–Ω—ã–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.</div>
  </div>
</div>

<script>
/* Matrix rain */
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
function size(){ canvas.width=innerWidth; canvas.height=innerHeight; }
size(); addEventListener('resize', size);
let cols = Math.floor(canvas.width / 14);
let y = Array.from({length: cols}, () => Math.random()*10);
(function matrix(){
  ctx.fillStyle='rgba(0,0,0,0.18)'; ctx.fillRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle='#0f0'; ctx.font='14px monospace';
  for(let i=0;i<cols;i++){
    const ch=String.fromCharCode(33+Math.random()*94), x=i*14;
    ctx.fillText(ch,x,y[i]*14);
    if(y[i]*14>canvas.height && Math.random()>0.96) y[i]=0;
    y[i]+=1.2+Math.random()*1.4; // —Å–ª–µ–≥–∫–∞ –±—ã—Å—Ç—Ä–µ–µ
  }
  requestAnimationFrame(matrix);
})();

/* –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: 2‚Äì3—Å —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è ‚Üí ¬´–í–∞—Å –≤–∑–ª–æ–º–∞–ª–∏¬ª –º–∏–≥–∞–µ—Ç 3 —Ä–∞–∑–∞ –∑–∞ 3—Å ‚Üí —á–µ—Ä–µ–∑ 2—Å –ø–ª–∞—à–∫–∞ */
const typeEl = document.getElementById('typewriter');
const big = document.getElementById('bigtext');
const reveal = document.getElementById('revealBox');

(async function run(){
  // 1) ¬´–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö‚Ä¶¬ª ~2‚Äì3—Å
  await typeScan(2200); // –º–æ–∂–Ω–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å 2500 –¥–ª—è —Ä–æ–≤–Ω–æ 2.5—Å

  // 2) –ü–æ–∫–∞–∑ "–í–∞—Å –≤–∑–ª–æ–º–∞–ª–∏" –∏ –º–∏–≥–∞–Ω–∏–µ 3 —Ä–∞–∑–∞ –∑–∞ 3 —Å–µ–∫
  big.style.display='block';
  await flashBigExact(3000, 3); // –æ–±—â–∞—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å 3—Å, —Ä–æ–≤–Ω–æ 3 –º–∏–≥–∞–Ω–∏—è

  // 3) –ü–∞—É–∑–∞ 2 —Å–µ–∫ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–ª–∞—à–∫—É-–ø–æ—è—Å–Ω–µ–Ω–∏–µ
  await pause(2000);
  reveal.style.display='block';
})();

function typeScan(totalMs){
  // –ë—ã—Å—Ç—Ä–∞—è ¬´–ø–µ—á–∞—Ç—å¬ª —Å—Ç—Ä–æ–∫–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ totalMs
  const text = '–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö‚Ä¶';
  typeEl.textContent = '';
  const perChar = Math.max(20, Math.floor(totalMs / text.length) - 10); // —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—á–∞—Ç–∏
  return new Promise(res=>{
    let i=0;
    const t=setInterval(()=>{
      typeEl.textContent += text.charAt(i++);
      if(i>=text.length){ clearInterval(t); setTimeout(res, Math.max(0, totalMs - i*perChar)); }
    }, perChar);
  });
}

function pause(ms){ return new Promise(r=>setTimeout(r, ms)); }

async function flashBigExact(totalMs, flashes){
  // –¥–µ–ª–∞–µ–º flashes "–º–∏–≥–∞–Ω–∏–π" —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ –∑–∞ totalMs
  const interval = totalMs / (flashes*2); // on/off —à–∞–≥
  for(let i=0;i<flashes*2;i++){
    big.style.opacity = (i%2===0)? '0.15' : '1';
    await pause(interval);
  }
  big.style.opacity = '1';
}
</script>
</body>
</html>
