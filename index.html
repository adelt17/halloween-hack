<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–í–∞—Å –í–∑–ª–æ–º–∞–ª–∏ ‚Äî Halloween prank</title>
<style>
  html,body{height:100%;margin:0;background:#000;color:#0f0;font-family:"Courier New",monospace;overflow:hidden}
  canvas{position:fixed;inset:0;z-index:0;display:block}
  .overlay{position:relative;z-index:2;height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:18px;box-sizing:border-box}
  .panel{max-width:720px;background:rgba(0,0,0,.5);border:1px solid rgba(0,255,0,.06);padding:22px;border-radius:12px;box-shadow:0 8px 40px rgba(0,0,0,.6)}
  h1{margin:0;font-size:30px;letter-spacing:1px;color:#d7ffd7}
  .status{color:inherit}
  .big{font-size:52px;font-weight:900;color:#ff1f1f;text-shadow:0 0 22px rgba(255,31,31,.18);display:none;margin-top:10px}
  .type{margin-top:12px;min-height:46px;color:#cfeecc;font-size:18px}
  .reveal{margin-top:16px;display:none;background:#ff8c1a;color:#1a0a00;padding:12px;border-radius:8px;font-weight:800}
  @media (max-width:520px){.panel{padding:14px}.big{font-size:38px}}
</style>
</head>
<body>
<canvas id="c"></canvas>

<div class="overlay">
  <div class="panel">
    <h1>–°–¢–ê–¢–£–° –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò: <span id="status" class="status">–ü–û–í–†–ï–ñ–î–Å–ù</span></h1>
    <div class="big" id="bigtext">–í–∞—Å –í–∑–ª–æ–º–∞–ª–∏</div>
    <div class="type" id="typewriter">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ü–µ–ª–∏‚Ä¶</div>
    <div class="reveal" id="revealBox">üéÉ –≠—Ç–æ –ø—Ä–∞–Ω–∫. –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.</div>
  </div>
</div>

<script>
/* Matrix rain */
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let w = canvas.width = innerWidth, h = canvas.height = innerHeight;
let cols = Math.floor(w / 14), ypos = Array(cols).fill(0);
addEventListener('resize', ()=>{ w=canvas.width=innerWidth; h=canvas.height=innerHeight; cols=Math.floor(w/14); ypos=Array(cols).fill(0); });
(function matrix(){
  ctx.fillStyle='rgba(0,0,0,0.18)'; ctx.fillRect(0,0,w,h);
  ctx.fillStyle='#0f0'; ctx.font='14px monospace';
  for(let i=0;i<cols;i++){
    const ch=String.fromCharCode(33+Math.random()*94), x=i*14;
    ctx.fillText(ch,x,ypos[i]*14);
    if(ypos[i]*14>h && Math.random()>0.965) ypos[i]=0;
    ypos[i]+=1+Math.random()*1.7;
  }
  requestAnimationFrame(matrix);
})();

/* –ë—ã—Å—Ç—Ä–æ–µ ¬´—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ¬ª: ‚âà2 —Å–µ–∫ —Å—É–º–º–∞—Ä–Ω–æ */
const typeEl = document.getElementById('typewriter');
const big = document.getElementById('bigtext');
const reveal = document.getElementById('revealBox');

const steps = [
  '–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤...',
  '–û–±—Ö–æ–¥ –º–µ–∂—Å–µ—Ç–µ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞...',
  '–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö...',
  '–ü–µ—Ä–µ—Å—ã–ª–∫–∞ –¥–∞–Ω–Ω—ã—Ö...',
  '–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ'
];

(async function run(){
  const perStepMs = 350; // 5√ó350 ‚âà 1.75 —Å + –ø–∞—É–∑–∞ = —á—É—Ç—å –±–æ–ª—å—à–µ 2 —Å
  for (let i=0;i<steps.length;i++){
    typeEl.textContent = steps[i];
    await pause(perStepMs);
  }

  typeEl.textContent = '';
  big.style.display = 'block';

  // –ú–∏–≥–∞–Ω–∏–µ 3 —Ä–∞–∑–∞ –∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã
  await blinkBig(3000);

  // –ß–µ—Ä–µ–∑ 1 —Å–µ–∫ –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–≠—Ç–æ –ø—Ä–∞–Ω–∫¬ª
  await pause(1000);
  reveal.style.display = 'block';
})();

function pause(ms){ return new Promise(r=>setTimeout(r,ms)); }

async function blinkBig(totalMs){
  const blinks = 3;
  const perPhase = totalMs / (blinks * 2);
  for (let i=0;i<blinks;i++){
    big.style.opacity='1'; await pause(perPhase);
    big.style.opacity='0.18'; await pause(perPhase);
  }
  big.style.opacity='1';
}

addEventListener('keydown', e=>{
  if(e.key==='Escape') reveal.style.display='none';
});
</script>
</body>
</html>
