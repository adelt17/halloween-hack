<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>–í–∞—Å –≤–∑–ª–æ–º–∞–ª–∏ ‚Äî Halloween prank</title>
<style>
  html,body{height:100%;margin:0;background:#000;color:#0f0;font-family:"Courier New",monospace;overflow:hidden}
  canvas{position:fixed;inset:0;z-index:0;display:block}
  .overlay{position:relative;z-index:2;height:100vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:18px;box-sizing:border-box}
  .panel{max-width:720px;background:rgba(0,0,0,.5);border:1px solid rgba(0,255,0,.06);padding:22px;border-radius:12px;box-shadow:0 8px 40px rgba(0,0,0,.6)}
  h1{margin:0;font-size:30px;letter-spacing:1px;color:#d7ffd7}
  .status {color:#ffb02e; text-shadow:0 0 10px rgba(255,176,46,.15);} /* –æ—Ä–∞–Ω–∂–µ–≤—ã–π —Å—Ç–∞—Ç—É—Å */
  .big{font-size:52px;font-weight:900;color:#ff1f1f;text-shadow:0 0 22px rgba(255,31,31,.18);display:none;margin-top:10px}
  .type{margin-top:12px;min-height:46px;color:#cfeecc;font-size:18px}
  .reveal{margin-top:16px;display:none;background:#0f0;color:#000;padding:12px;border-radius:8px;font-weight:800}
  @media (max-width:520px){.panel{padding:14px}.big{font-size:38px}}
</style>
</head>
<body>
<canvas id="c"></canvas>

<div class="overlay">
  <div class="panel" role="region" aria-label="–•—ç–ª–ª–æ—É–∏–Ω—Å–∫–∏–π —Ä–æ–∑—ã–≥—Ä—ã—à">
    <h1>–°–¢–ê–¢–£–° –ë–ï–ó–û–ü–ê–°–ù–û–°–¢–ò: <span id="status" class="status">–ü–û–í–†–ï–ñ–î–Å–ù</span></h1>
    <div class="big" id="bigtext">–í–ê–° –í–ó–õ–û–ú–ê–õ–ò</div>
    <div class="type" id="typewriter">–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ü–µ–ª–∏‚Ä¶</div>
    <div class="reveal" id="revealBox">üéÉ –≠—Ç–æ —Ö—ç–ª–ª–æ—É–∏–Ω—Å–∫–∏–π –ø—Ä–∞–Ω–∫! –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.</div>
  </div>
</div>

<script>
/* Matrix rain (–∫–∞–∫ –±—ã–ª–æ) + –ª—ë–≥–∫–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ */
const canvas = document.getElementById('c');
const ctx = canvas.getContext('2d');
let w = canvas.width = innerWidth, h = canvas.height = innerHeight;
let cols = Math.floor(w / 14), ypos = Array(cols).fill(0);
addEventListener('resize', ()=>{ w=canvas.width=innerWidth; h=canvas.height=innerHeight; cols=Math.floor(w/14); ypos=Array(cols).fill(0); });
(function matrix(){
  ctx.fillStyle='rgba(0,0,0,0.18)'; ctx.fillRect(0,0,w,h);
  ctx.fillStyle='#0f0'; ctx.font='14px monospace';
  for(let i=0;i<cols;i++){
    const ch=String.fromCharCode(33+Math.random()*94), x=i*14;
    ctx.fillText(ch,x,ypos[i]*14);
    if(ypos[i]*14>h && Math.random()>0.965) ypos[i]=0;
    ypos[i]+=1+Math.random()*1.7;
  }
  requestAnimationFrame(matrix);
})();

/* –ë—ã—Å—Ç—Ä—ã–π ¬´–≤–∑–ª–æ–º¬ª: –≤—Å–µ —à–∞–≥–∏ ‚â§ 3 —Å–µ–∫ */
const typeEl = document.getElementById('typewriter');
const big = document.getElementById('bigtext');
const reveal = document.getElementById('revealBox');

const steps = [
  '–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤...',
  '–û–±—Ö–æ–¥ –º–µ–∂—Å–µ—Ç–µ–≤–æ–≥–æ —ç–∫—Ä–∞–Ω–∞...',
  '–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —É—á—ë—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö...',
  '–ü–µ—Ä–µ—Å—ã–ª–∫–∞ –¥–∞–Ω–Ω—ã—Ö...',
  '–ö–û–ú–ü–†–û–ú–ò–°–° –ó–ê–§–ò–ö–°–ò–†–û–í–ê–ù'
];

(async function run(){
  // –ü–µ—á–∞—Ç—å –±—ã—Å—Ç—Ä–æ: ~10–º—Å/—Å–∏–º–≤–æ–ª, –º–∞–ª–µ–Ω—å–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É —à–∞–≥–∞–º–∏
  for(const s of steps){ await typeLine(s, 120); }
  await pause(200);
  big.style.display='block';
  await blinkBig(3000);       // 3 –º–∏–≥–∞–Ω–∏—è –∑–∞ 3 —Å–µ–∫
  await pause(1000);          // –ø–∞—É–∑–∞ 1 —Å–µ–∫
  reveal.style.display='block';
})();

function typeLine(text, gapAfter){
  return new Promise(res=>{
    typeEl.textContent=''; let i=0;
    const iv = setInterval(()=>{
      typeEl.textContent += text.charAt(i++); 
      if(i>text.length){ clearInterval(iv); setTimeout(res, gapAfter); }
    }, 10); // —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—á–∞—Ç–∏
  });
}

function pause(ms){ return new Promise(r=>setTimeout(r,ms)); }

// 3 —á—ë—Ç–∫–∏—Ö –º–∏–≥–∞–Ω–∏—è –∑–∞ 3 —Å–µ–∫—É–Ω–¥—ã
async function blinkBig(totalMs){
  const blinks = 3;
  const perBlink = totalMs / (blinks*2); // on/off —Ä–∞–≤–Ω—ã–µ –¥–æ–ª–∏
  for(let i=0;i<blinks;i++){
    big.style.opacity = '1';   await pause(perBlink);
    big.style.opacity = '0.18';await pause(perBlink);
  }
  big.style.opacity = '1';
}

// ESC —Å–∫—Ä—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ (–ø–æ –∂–µ–ª–∞–Ω–∏—é –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å)
addEventListener('keydown', e=>{
  if(e.key==='Escape'){ reveal.style.display='none'; }
});
</script>
</body>
</html>
